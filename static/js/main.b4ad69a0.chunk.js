(this.webpackJsonprestore=this.webpackJsonprestore||[]).push([[0],{130:function(t,e,a){},131:function(t,e,a){},141:function(t,e,a){},143:function(t,e,a){},163:function(t,e,a){},262:function(t,e,a){},263:function(t,e,a){},264:function(t,e,a){},265:function(t,e,a){},266:function(t,e,a){},270:function(t,e,a){"use strict";a.r(e);var c,n=a(0),r=a.n(n),o=a(32),i=a.n(o),s=a(19),d=a(41),u=a(115),l=(a(130),a(18)),b=a(17),j=(a(131),a(66));!function(t){t.PENDING="Pending",t.FULFILLED="Fulfilled",t.ERROR="Error"}(c||(c={}));var O=c,h=function(t){return function(e){return e({type:"FETCH_BOOKS_REQUEST_PENDING",payload:O.PENDING}),t.getBooks().then((function(t){return e((a=t,c=O.FULFILLED,{type:"FETCH_BOOKS_REQUEST_SUCCESS",payload:{newBooks:a,status:c}}));var a,c})).catch((function(t){return e((a=t,c=O.ERROR,{type:"FETCH_BOOKS_REQUEST_ERROR",payload:{error:a,status:c}}));var a,c}))}},p=function(t,e){return function(a){return a({type:"ADD_BOOKS_REQUEST_PENDING",payload:O.PENDING}),t.addBook(e).then((function(){t.getBookWithParams(e.title,e.author).then((function(t){return a((e=t,c=O.FULFILLED,{type:"BOOK_ADDED_TO_CATALOG",payload:{newBook:e,status:c}}));var e,c}))})).catch((function(t){return a((e=t,c=O.ERROR,{type:"ADD_BOOKS_REQUEST_ERROR",payload:{error:e,status:c}}));var e,c}))}},m=function(t,e){return function(a){return a({type:"UPDATE_BOOKS_REQUEST_PENDING",payload:O.PENDING}),t.updateBook(e).then((function(){t.getBookById(e.id).then((function(t){return a(function(t,e){return{type:"BOOK_UPDATED_IN_CATALOG",payload:{updatedBook:t,status:e}}}(t,O.FULFILLED))}))})).catch((function(t){return a((e=t,c=O.ERROR,{type:"UPDATE_BOOKS_REQUEST_ERROR",payload:{error:e,status:c}}));var e,c}))}},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:"BOOK_ADDED_TO_CART",payload:{bookId:t,amount:e}}},x=(a(141),a(2)),v=function(){return Object(x.jsx)("div",{"data-testid":"spinner",children:"loading..."})},g=(a(143),function(){return Object(x.jsx)("div",{"data-testid":"error",children:"Error!"})}),k=a(7),E=a.n(k),y=a(21),_=a(9),I=a(45),N=a.n(I),B=function t(){var e=this;Object(_.a)(this,t),this.apiBase="http://localhost:8000",this.getBooks=Object(y.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N.a.get("".concat(e.apiBase,"/books")).then((function(t){return t.data})).catch((function(t){throw new Error(t.toString())})));case 1:case"end":return t.stop()}}),t)}))),this.getBookWithParams=function(){var t=Object(y.a)(E.a.mark((function t(a,c){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURIComponent(a),r=encodeURIComponent(c),t.abrupt("return",N.a.get("".concat(e.apiBase,"/books?title=").concat(n,"&author=").concat(r)).then((function(t){return t.data})).catch((function(t){throw new Error(t.toString())})));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.getBookById=function(){var t=Object(y.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N.a.get("".concat(e.apiBase,"/books/").concat(a)).then((function(t){return t.data})).catch((function(t){throw new Error(t.toString())})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.addBook=function(){var t=Object(y.a)(E.a.mark((function t(a){var c,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={Accept:"application/json","Content-Type":"application/json"},n=JSON.stringify({title:a.title,author:a.author,price:a.price,coverImage:a.coverImage}),t.next=4,N.a.post("".concat(e.apiBase,"/books"),n,{headers:c}).catch((function(t){throw new Error(t.toString())}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateBook=function(){var t=Object(y.a)(E.a.mark((function t(a){var c,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={Accept:"application/json","Content-Type":"application/json"},n=JSON.stringify({title:a.title,author:a.author,price:a.price,coverImage:a.coverImage}),t.next=4,N.a.put("".concat(e.apiBase,"/books/").concat(a.id),n,{headers:c}).catch((function(t){throw new Error(t.toString())}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=new B,T=r.a.createContext(S),R=a(6),w=(a(163),a(33)),C=a(30),D=a(64),A=T,P=a(65),U=function(t){return t.bookList.books},F=function(t){return Object.values(t.shoppingCart.cartItems)},L=Object(P.a)(U,(function(t){return function(e){return t.find((function(t){return t.id===e}))}})),K=Object(P.a)(F,U,(function(t,e){return t.reduce((function(t,a){var c,n=e.find((function(t){return t.id===a.id})),r=null!==(c=null===n||void 0===n?void 0:n.price)&&void 0!==c?c:0;return t+a.amount*r}),0)})),G=Object(P.a)(F,(function(t){return t.reduce((function(t,e){return t+e.amount}),0)})),Q=function(t){var e=t.bookId,a=t.switchDisplayEditForm,c=Object(n.useContext)(A),r=Object(s.b)(),o=Object(n.useState)(!1),i=Object(b.a)(o,2),d=i[0],u=i[1],l=Object(n.useState)(""),j=Object(b.a)(l,2),O=j[0],h=j[1],p=Object(n.useState)(""),f=Object(b.a)(p,2),v=f[0],g=f[1],k=C.c().shape({title:C.d().required("Book Title should be filled in"),author:C.d().required("Book Author should be filled in"),price:C.b().required().positive("Book Price should be positive number"),coverImage:C.a()}),E=Object(w.d)({resolver:Object(D.a)(k)}),y=E.register,_=E.handleSubmit,I=E.formState.errors,N=E.getValues,B=E.reset,S=E.watch,T=Object(s.c)(L),P=Object(n.useMemo)((function(){return T(e)}),[e]),U=S("coverImage",P.coverImage);Object(n.useEffect)((function(){var t=function(){var t="";if(0!==U.length)if("string"!==typeof U){if(U[0]){var e=new FileReader;e.readAsDataURL(U[0]),e.onload=function(){var t=e.result;h(t)},t=O}}else t=P.coverImage;else t=P.coverImage;return t}();g(t)}),[U,O,P.coverImage]),Object(n.useEffect)((function(){B({title:P.title,author:P.author,price:P.price})}),[P,B]);return Object(x.jsxs)("div",{children:[Object(x.jsxs)("form",{className:"update-book-form",onSubmit:_((function(t){var e;e=0!==t.coverImage.length?O:P.coverImage;var a={id:P.id,title:t.title,author:t.author,price:t.price,coverImage:e};r(m(c,a)).then((function(){return u(!0)})),setTimeout((function(){u(!1)}),3e3)})),children:[Object(x.jsxs)("div",{className:"update-book-container",children:[Object(x.jsxs)("div",{className:"update-book-image-container",children:[Object(x.jsx)("label",{htmlFor:"temp-id",children:"Book Cover Image"}),Object(x.jsx)("img",{"data-testid":"update-book-image",id:"image2",alt:"cover_image2",width:"120px",height:"200px",src:v}),Object(x.jsxs)("label",{className:"upload-file-btn",htmlFor:"file2",children:["Browse",Object(x.jsx)("input",Object(R.a)({"data-testid":"update-book-input-image",type:"file",id:"file2",accept:".png, .jpg, .jpeg"},y("coverImage")))]})]}),Object(x.jsxs)("div",{className:"update-book-group",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"inputTitle",className:"title-label",children:"Book Title"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"edit-book-input-title",id:"inputTitle",type:"text",placeholder:"title"},y("title"))),I.title&&Object(x.jsx)("p",{children:I.title.message})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"inputAuthor",children:"Book Author"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"edit-book-input-author",id:"inputAuthor",type:"text",placeholder:"author"},y("author"))),I.author&&Object(x.jsx)("p",{children:I.author.message})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"inputPrice",children:"Book Price"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"edit-book-input-price",id:"inputPrice",type:"number",placeholder:"price in $"},y("price"))),I.price&&""===N("price")&&Object(x.jsx)("p",{children:"Book Price should be filled in"}),I.price&&N("price")<0&&Object(x.jsx)("p",{children:I.price.message})]})]})]}),Object(x.jsxs)("div",{className:"update-book-group3",children:[Object(x.jsx)("input",{"data-testid":"save-edit-book-btn",type:"submit",value:"Save changes",className:"btn btn-info save-edit-book"}),Object(x.jsx)("button",{"data-testid":"cancel-edit-book-btn",className:"btn btn-info cancel-edit-book",type:"button",onClick:function(){return a(!1)},children:"Cancel Editing"})]})]}),d&&Object(x.jsx)("p",{className:"book-added-confirmation",children:"Book successfully updated"})]})},M=(a(262),function(){var t=Object(n.useContext)(T),e=Object(s.b)(),a=Object(n.useState)(!1),c=Object(b.a)(a,2),r=c[0],o=c[1],i=Object(n.useState)(!1),d=Object(b.a)(i,2),u=d[0],l=d[1],j=Object(n.useState)(""),O=Object(b.a)(j,2),h=O[0],m=O[1],f=C.c().shape({title:C.d().required("Book Title should be filled in"),author:C.d().required("Book Author should be filled in"),price:C.b().required().positive("Book Price should be positive number"),coverImage:C.a().test("fileType","Image should be uploaded",(function(t){return t&&0!==t.length}))}),v=Object(w.d)({resolver:Object(D.a)(f)}),g=v.register,k=v.handleSubmit,E=v.formState.errors,y=v.reset,_=v.getValues,I=(0,v.watch)("coverImage");Object(n.useEffect)((function(){if(I&&I[0]){var t=new FileReader;t.readAsDataURL(I[0]),t.onload=function(){var e=t.result;m(e)}}}),[I]);return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{className:"add-book-form",onSubmit:k((function(a){var c={title:a.title,author:a.author,price:a.price,coverImage:h};e(p(t,c)).then((function(){return o(!0)})),setTimeout((function(){o(!1),y({}),l(!1)}),3e3)})),children:[Object(x.jsx)("label",{htmlFor:"inputTitle",className:"title-label",children:"Book Title"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"add-book-input-title",id:"inputTitle",type:"text",placeholder:"title"},g("title"))),E.title&&Object(x.jsx)("p",{children:E.title.message}),Object(x.jsx)("label",{htmlFor:"inputAuthor",children:"Book Author"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"add-book-input-author",id:"inputAuthor",type:"text",placeholder:"author"},g("author"))),E.author&&Object(x.jsx)("p",{children:E.author.message}),Object(x.jsx)("label",{htmlFor:"inputPrice",children:"Book Price"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"add-book-input-price",id:"inputPrice",type:"number",placeholder:"price in $"},g("price"))),E.price&&""===_("price")&&Object(x.jsx)("p",{children:"Book Price should be filled in"}),E.price&&_("price")<0&&Object(x.jsx)("p",{children:E.price.message}),Object(x.jsx)("label",{htmlFor:"temp-id",children:"Book Cover Image"}),Object(x.jsxs)("label",{className:"upload-file-btn",children:["Browse",Object(x.jsx)("input",Object(R.a)({"data-testid":"add-book-input-image",type:"file",id:"file1",accept:".png, .jpg, .jpeg"},g("coverImage")))]}),I&&0!==I.length&&Object(x.jsx)("img",{"data-testid":"add-book-image",id:"image1",alt:"cover_image1",width:"120px",height:"200px",src:h}),E.coverImage&&!u&&Object(x.jsx)("p",{children:E.coverImage.message}),Object(x.jsx)("input",{"data-testid":"add-book-submit-btn",type:"submit",value:"Add new book",className:"btn btn-info"}),r&&Object(x.jsx)("p",{className:"book-added-confirmation",children:"Book successfully added"})]})})}),V=(a(263),function(t){var e=t.keyword,a=t.setKeyword;return Object(x.jsxs)("div",{className:"search-field",children:[Object(x.jsx)("span",{className:"search-title",children:"Find your book"}),Object(x.jsx)("input",{"data-testid":"search-field",className:"search",value:e,placeholder:"search book",onChange:function(t){return a(t.target.value)}},"random1")]})}),H=function(){var t=Object(n.useState)(""),e=Object(b.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)(0),o=Object(b.a)(r,2),i=o[0],d=o[1],u=Object(n.useState)(!1),l=Object(b.a)(u,2),O=l[0],p=l[1],m=Object(n.useState)(null),k=Object(b.a)(m,2),E=k[0],y=k[1],_=Object(n.useCallback)((function(t){t.currentTarget.dataset.id&&(d(Number(t.currentTarget.dataset.id)),y(Number(t.currentTarget.dataset.id))),p(!0)}),[]),I=Object(n.useCallback)((function(){O&&E||p(!O),y(null)}),[O,E]),N=Object(n.useMemo)((function(){return O&&!E}),[O,E]),B=Object(n.useMemo)((function(){return O&&E}),[O,E]),S=Object(s.c)((function(t){return t.bookList})),R=Object(n.useContext)(T),w=Object(s.b)(),C=S.books,D=S.loading,A=S.error,P=Object(n.useMemo)((function(){return C.filter((function(t){return t.title.toLowerCase().includes(a.toLowerCase())}))}),[a,C]);Object(n.useEffect)((function(){w(h(R))}),[w,R]);var U=function(t){var e=t.index,a=t.key,c=t.style,n=P[e];if(n){var r=n.id,o=n.title,i=n.author,s=n.price,d=n.coverImage,u="book-".concat(r),l="add-to-cart-btn-".concat(r),b="edit-book-btn-".concat(r);return Object(x.jsxs)("div",{className:"book-list-item",style:c,"data-testid":u,children:[Object(x.jsx)("div",{className:"book-cover",children:Object(x.jsx)("img",{src:d,alt:"cover"})}),Object(x.jsxs)("div",{className:"book-details",children:[Object(x.jsx)("span",{className:"book-title","data-testid":"book-title",children:o}),Object(x.jsx)("div",{className:"book-author","data-testid":"book-author",children:i}),Object(x.jsxs)("div",{className:"book-price","data-testid":"book-price",children:["$",s]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{type:"button",className:"btn btn-info add-to-cart",onClick:function(){return w(f(r))},"data-testid":l,children:"Add to cart"}),Object(x.jsx)("button",{type:"button",className:"btn btn-info edit-book",onClick:_,"data-id":r,"data-testid":b,children:"Edit Book"})]})]})]},a)}return null};return D?Object(x.jsx)(v,{}):A?Object(x.jsx)(g,{}):Object(x.jsxs)("div",{children:[Object(x.jsx)(V,{keyword:a,setKeyword:c}),Object(x.jsx)("button",{"data-testid":"add-book-btn",type:"button",className:"btn btn-info show-add-new-book",onClick:I,children:"Add Book"}),N&&Object(x.jsx)(M,{}),B&&Object(x.jsx)(Q,{bookId:i,switchDisplayEditForm:function(){return p(!1)}}),Object(x.jsx)("div",{children:Object(x.jsx)(j.c,{children:function(t){var e=t.height,a=t.registerChild,c=t.scrollTop;return Object(x.jsx)("div",{ref:function(t){return a(t)},className:"book-list",children:Object(x.jsx)(j.a,{disableHeight:!0,children:function(t){var a=t.width;return Object(x.jsx)(j.b,{width:a,height:e,rowCount:P.length,rowHeight:220,autoHeight:!0,scrollTop:c,rowRenderer:U})}})})}})})]})},q=function(){return Object(x.jsx)("div",{children:Object(x.jsx)(H,{})})},$=(a(264),a(265),function(t){var e=t.item,a=t.idx,c=Object(s.b)(),r=e.id,o=e.amount,i=Object(s.c)(L),d=Object(n.useMemo)((function(){return i(e.id)}),[e.id]),u="item-image-".concat(r),l="item-title-".concat(r),b="item-amount-".concat(r),j="item-price-".concat(r),O="item-all-remove-btn-".concat(r),h="item-remove-btn-".concat(r),p="item-add-btn-".concat(r);if(!d)return Object(x.jsx)(x.Fragment,{});var m=d.title,v=d.price,g=d.coverImage;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:a+1}),Object(x.jsx)("td",{"data-testid":u,children:Object(x.jsx)("div",{className:"book-coverage",children:Object(x.jsx)("img",{src:g,alt:"cover"})})}),Object(x.jsx)("td",{"data-testid":l,children:m}),Object(x.jsx)("td",{"data-testid":b,children:o}),Object(x.jsxs)("td",{"data-testid":j,children:["$",v*o]}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{"data-testid":O,type:"button",onClick:function(){return c(function(t){return{type:"ALL_BOOKS_REMOVED_TO_CART",payload:{bookId:t,amount:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}}(r))},className:"btn btn-outline-danger btn-sm float-right",children:Object(x.jsx)("i",{className:"fa fa-trash-o"})}),Object(x.jsx)("button",{"data-testid":p,type:"button",onClick:function(){return c(f(r))},className:"btn btn-outline-success btn-sm float-right",children:Object(x.jsx)("i",{className:"fa fa-plus-circle"})}),Object(x.jsx)("button",{"data-testid":h,type:"button",onClick:function(){return c(function(t){return{type:"BOOK_REMOVED_TO_CART",payload:{bookId:t,amount:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1}}}(r))},className:"btn btn-outline-warning btn-sm float-right",children:Object(x.jsx)("i",{className:"fa fa-minus-circle"})})]})]},r)}),J=function(){var t=Object(s.b)(),e=Object(n.useContext)(A);Object(n.useEffect)((function(){t(h(e))}),[t,e]);var a=Object(s.c)(K),c=Object(s.c)(F);return Object(x.jsxs)("div",{className:"shopping-cart-table",children:[Object(x.jsx)("h2",{children:"Your Order"}),Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"#"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-item-header",children:"Item"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-title-header",className:"title",children:"Title"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-count-header",children:"Count"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-price-header",children:"Price"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-action-header",children:"Action"})]})}),Object(x.jsx)("tbody",{children:c.map((function(t,e){return Object(x.jsx)($,{idx:e,item:t},t.id)}))})]}),Object(x.jsxs)("div",{"data-testid":"shopping-cart-total",className:"total",children:["Total: $",a]})]})},W=function(){return Object(x.jsx)("div",{children:Object(x.jsx)(J,{})})},X=function(){return Object(x.jsx)("div",{children:"Welcome to Book Store Main Page"})},Y=(a(266),function(t){var e=t.numItems,a=t.total;return Object(x.jsxs)("header",{className:"shop-header row",children:[Object(x.jsx)(d.b,{to:"/",children:Object(x.jsx)("div",{"data-testid":"link-to-main-page",className:"logo text-dark",children:"ReStore"})}),Object(x.jsxs)("div",{className:"shop-items",children:[Object(x.jsx)(d.b,{to:"/catalog",children:Object(x.jsx)("div",{"data-testid":"link-to-catalog",className:"store",children:"Books Catalog"})}),Object(x.jsx)(d.b,{to:"/items",children:Object(x.jsxs)("div",{className:"shopping-cart","data-testid":"link-to-shopping-cart",children:[Object(x.jsx)("i",{className:"cart-icon fa fa-shopping-cart"}),e," ","items ($",a,")"]})})]})]})}),z=function(){var t=Object(s.c)(K),e=Object(s.c)(G);return Object(x.jsxs)("main",{role:"main",className:"container",children:[Object(x.jsx)(Y,{numItems:e,total:t}),Object(x.jsxs)(l.c,{children:[Object(x.jsx)(l.a,{path:"/",component:X,exact:!0}),Object(x.jsx)(l.a,{path:"/catalog",component:q,exact:!0}),Object(x.jsx)(l.a,{path:"/items",component:W})]})]})},Z=a(13),tt=a(22),et=a(23),at=function(t){Object(tt.a)(a,t);var e=Object(et.a)(a);function a(t){var c;return Object(_.a)(this,a),(c=e.call(this,t)).state={hasErrorValue:{hasError:!1}},c}return Object(Z.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasErrorValue:{hasError:!1}})}},{key:"render",value:function(){var t=this.state.hasErrorValue,e=this.props.children;return t.hasError?Object(x.jsx)(g,{}):e.props.children}}]),a}(n.Component),ct=a(34),nt=a(80),rt=a(121),ot=a.n(rt),it=a(122),st={books:[],loading:!0,error:null,status:O.PENDING},dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_BOOKS_REQUEST_PENDING":return{books:[],loading:!0,error:null,status:e.payload};case"FETCH_BOOKS_REQUEST_SUCCESS":return{books:e.payload.newBooks,loading:!1,error:null,status:e.payload.status};case"FETCH_BOOKS_REQUEST_ERROR":return{books:[],loading:!1,error:e.payload.error,status:e.payload.status};case"BOOK_ADDED_TO_CATALOG":return Object(R.a)(Object(R.a)({},t),{},{books:t.books.concat(e.payload.newBook),status:e.payload.status});case"BOOK_UPDATED_IN_CATALOG":return Object(R.a)(Object(R.a)({},t),{},{books:t.books.slice(0,e.payload.updatedBook.id-1).concat(e.payload.updatedBook).concat(t.books.slice(e.payload.updatedBook.id,t.books.length)),status:e.payload.status});case"ADD_BOOKS_REQUEST_ERROR":case"UPDATE_BOOKS_REQUEST_ERROR":return Object(R.a)(Object(R.a)({},t),{},{loading:!1,error:e.payload.error,status:e.payload.status});case"ADD_BOOKS_REQUEST_PENDING":case"UPDATE_BOOKS_REQUEST_PENDING":return Object(R.a)(Object(R.a)({},t),{},{status:e.payload});default:return t}},ut=a(81),lt=a(82),bt=a(29),jt={cartItems:{}},Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"BOOK_ADDED_TO_CART":var a,c,n=null!==(a=null===(c=t.cartItems[e.payload.bookId])||void 0===c?void 0:c.amount)&&void 0!==a?a:0;return Object(R.a)(Object(R.a)({},t),{},{cartItems:Object(R.a)(Object(R.a)({},t.cartItems),{},Object(bt.a)({},e.payload.bookId,{id:e.payload.bookId,amount:n+e.payload.amount}))});case"BOOK_REMOVED_TO_CART":var r,o,i=null!==(r=null===(o=t.cartItems[e.payload.bookId])||void 0===o?void 0:o.amount)&&void 0!==r?r:0;if(1===i){var s=t.cartItems,d=e.payload.bookId,u=(s[d],Object(ut.a)(s,[d].map(lt.a)));return Object(R.a)(Object(R.a)({},t),{},{cartItems:Object(R.a)({},u)})}return Object(R.a)(Object(R.a)({},t),{},{cartItems:Object(R.a)(Object(R.a)({},t.cartItems),{},Object(bt.a)({},e.payload.bookId,{id:e.payload.bookId,amount:i+e.payload.amount}))});case"ALL_BOOKS_REMOVED_TO_CART":var l=t.cartItems,b=e.payload.bookId,j=(l[b],Object(ut.a)(l,[b].map(lt.a)));return Object(R.a)(Object(R.a)({},t),{},{cartItems:Object(R.a)({},j)});default:return t}},ht=Object(ct.b)({bookList:dt,shoppingCart:Ot}),pt={key:"root",storage:ot.a,whitelist:["shoppingCart"]},mt=Object(nt.a)(pt,ht),ft=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ct.c,xt=Object(ct.d)(mt,ft(Object(ct.a)(it.a))),vt=Object(nt.b)(xt),gt=new B;i.a.render(Object(x.jsx)(s.a,{store:xt,children:Object(x.jsx)(u.a,{loading:null,persistor:vt,children:Object(x.jsx)(at,{children:Object(x.jsx)(A.Provider,{value:gt,children:Object(x.jsx)(d.a,{children:Object(x.jsx)(z,{})})})})})}),document.getElementById("root"))}},[[270,1,2]]]);
//# sourceMappingURL=main.b4ad69a0.chunk.js.map