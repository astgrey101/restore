(this.webpackJsonprestore=this.webpackJsonprestore||[]).push([[0],{131:function(t,e,a){},141:function(t,e,a){},143:function(t,e,a){},163:function(t,e,a){},262:function(t,e,a){},263:function(t,e,a){},264:function(t,e,a){},265:function(t,e,a){},266:function(t,e,a){},270:function(t,e,a){"use strict";a.r(e);var c,n=a(0),o=a.n(n),r=a(32),i=a.n(r),s=a(18),d=a(41),u=a(116),l=(a(131),a(19)),b=a(17),j=(a(83),a(66));!function(t){t.PENDING="Pending",t.FULFILLED="Fulfilled",t.ERROR="Error"}(c||(c={}));var O=c,h=function(t){return function(e){return e({type:"FETCH_BOOKS_REQUEST_PENDING",payload:O.PENDING}),t.getBooks().then((function(t){return e((a=t,c=O.FULFILLED,{type:"FETCH_BOOKS_REQUEST_SUCCESS",payload:{newBooks:a,status:c}}));var a,c})).catch((function(t){return e((a=t,c=O.ERROR,{type:"FETCH_BOOKS_REQUEST_ERROR",payload:{error:a,status:c}}));var a,c}))}},p=function(t,e){return function(a){return a({type:"ADD_BOOKS_REQUEST_PENDING",payload:O.PENDING}),t.addBook(e).then((function(){t.getBookWithParams(e.title,e.author).then((function(t){return a((e=t,c=O.FULFILLED,{type:"BOOK_ADDED_TO_CATALOG",payload:{newBook:e,status:c}}));var e,c}))})).catch((function(t){return a((e=t,c=O.ERROR,{type:"ADD_BOOKS_REQUEST_ERROR",payload:{error:e,status:c}}));var e,c}))}},m=function(t,e){return function(a){return a({type:"UPDATE_BOOKS_REQUEST_PENDING",payload:O.PENDING}),t.updateBook(e).then((function(){t.getBookById(e.id).then((function(t){return a(function(t,e){return{type:"BOOK_UPDATED_IN_CATALOG",payload:{updatedBook:t,status:e}}}(t,O.FULFILLED))}))})).catch((function(t){return a((e=t,c=O.ERROR,{type:"UPDATE_BOOKS_REQUEST_ERROR",payload:{error:e,status:c}}));var e,c}))}},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:"BOOK_ADDED_TO_CART",payload:{bookId:t,amount:e}}},x=(a(141),a(2)),v=function(){return Object(x.jsx)("div",{"data-testid":"spinner",children:"loading..."})},k=(a(143),function(){return Object(x.jsx)("div",{"data-testid":"error",children:"Error!"})}),g=a(7),E=a.n(g),y=a(21),_=a(9),I=a(45),N=a.n(I),B=function t(){var e=this;Object(_.a)(this,t),this.apiBase="http://localhost:8000",this.getBooks=Object(y.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N.a.get("".concat(e.apiBase,"/books")).then((function(t){return t.data})).catch((function(t){throw new Error(t.toString())})));case 1:case"end":return t.stop()}}),t)}))),this.getBookWithParams=function(){var t=Object(y.a)(E.a.mark((function t(a,c){var n,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURIComponent(a),o=encodeURIComponent(c),t.abrupt("return",N.a.get("".concat(e.apiBase,"/books?title=").concat(n,"&author=").concat(o)).then((function(t){return t.data})).catch((function(t){throw new Error(t.toString())})));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.getBookById=function(){var t=Object(y.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N.a.get("".concat(e.apiBase,"/books/").concat(a)).then((function(t){return t.data})).catch((function(t){throw new Error(t.toString())})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.addBook=function(){var t=Object(y.a)(E.a.mark((function t(a){var c,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={Accept:"application/json","Content-Type":"application/json"},n=JSON.stringify({title:a.title,author:a.author,price:a.price,coverImage:a.coverImage}),t.next=4,N.a.post("".concat(e.apiBase,"/books"),n,{headers:c}).catch((function(t){throw new Error(t.toString())}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateBook=function(){var t=Object(y.a)(E.a.mark((function t(a){var c,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={Accept:"application/json","Content-Type":"application/json"},n=JSON.stringify({title:a.title,author:a.author,price:a.price,coverImage:a.coverImage}),t.next=4,N.a.put("".concat(e.apiBase,"/books/").concat(a.id),n,{headers:c}).catch((function(t){throw new Error(t.toString())}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=new B,T=o.a.createContext(S),R=a(6),w=(a(163),a(33)),D=a(30),C=a(64),A=T,P=a(65),F=function(t){return t.bookList.books},U=function(t){return Object.values(t.shoppingCart.cartItems)},L=Object(P.a)(F,(function(t){return function(e){return t.find((function(t){return t.id===e}))}})),K=Object(P.a)(U,F,(function(t,e){return t.reduce((function(t,a){var c,n=e.find((function(t){return t.id===a.id})),o=null!==(c=null===n||void 0===n?void 0:n.price)&&void 0!==c?c:0;return t+a.amount*o}),0)})),G=Object(P.a)(U,(function(t){return t.reduce((function(t,e){return t+e.amount}),0)})),Q=function(t){var e=t.bookId,a=t.switchDisplayEditForm,c=Object(n.useContext)(A),o=Object(s.b)(),r=Object(n.useState)(!1),i=Object(b.a)(r,2),d=i[0],u=i[1],l=Object(n.useState)(""),j=Object(b.a)(l,2),O=j[0],h=j[1],p=Object(n.useState)(""),f=Object(b.a)(p,2),v=f[0],k=f[1],g=D.c().shape({title:D.d().required("Book Title should be filled in"),author:D.d().required("Book Author should be filled in"),price:D.b().required().positive("Book Price should be positive number"),coverImage:D.a()}),E=Object(w.d)({resolver:Object(C.a)(g)}),y=E.register,_=E.handleSubmit,I=E.formState.errors,N=E.getValues,B=E.reset,S=E.watch,T=Object(s.c)(L),P=Object(n.useMemo)((function(){return T(e)}),[e]),F=S("coverImage",P.coverImage);Object(n.useEffect)((function(){var t=function(){var t="";if(0!==F.length)if("string"!==typeof F){if(F[0]){var e=new FileReader;e.readAsDataURL(F[0]),e.onload=function(){var t=e.result;h(t)},t=O}}else t=P.coverImage;else t=P.coverImage;return t}();k(t)}),[F,O,P.coverImage]),Object(n.useEffect)((function(){B({title:P.title,author:P.author,price:P.price})}),[P,B]);return Object(x.jsxs)("div",{children:[Object(x.jsxs)("form",{className:"update-book-form",onSubmit:_((function(t){var e;e=0!==t.coverImage.length?O:P.coverImage;var a={id:P.id,title:t.title,author:t.author,price:t.price,coverImage:e};o(m(c,a)).then((function(){return u(!0)})),setTimeout((function(){u(!1)}),3e3)})),children:[Object(x.jsxs)("div",{className:"update-book-container",children:[Object(x.jsxs)("div",{className:"update-book-image-container",children:[Object(x.jsx)("label",{htmlFor:"temp-id",children:"Book Cover Image"}),Object(x.jsx)("img",{"data-testid":"update-book-image",id:"image2",alt:"cover_image2",width:"120px",height:"200px",src:v}),Object(x.jsxs)("label",{className:"upload-file-btn",htmlFor:"file2",children:["Browse",Object(x.jsx)("input",Object(R.a)({"data-testid":"update-book-input-image",type:"file",id:"file2",accept:".png, .jpg, .jpeg"},y("coverImage")))]})]}),Object(x.jsxs)("div",{className:"update-book-group",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"inputTitle",className:"title-label",children:"Book Title"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"edit-book-input-title",id:"inputTitle",type:"text",placeholder:"title"},y("title"))),I.title&&Object(x.jsx)("p",{children:I.title.message})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"inputAuthor",children:"Book Author"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"edit-book-input-author",id:"inputAuthor",type:"text",placeholder:"author"},y("author"))),I.author&&Object(x.jsx)("p",{children:I.author.message})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"inputPrice",children:"Book Price"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"edit-book-input-price",id:"inputPrice",type:"number",placeholder:"price in $"},y("price"))),I.price&&""===N("price")&&Object(x.jsx)("p",{children:"Book Price should be filled in"}),I.price&&N("price")<0&&Object(x.jsx)("p",{children:I.price.message})]})]})]}),Object(x.jsxs)("div",{className:"update-book-group3",children:[Object(x.jsx)("input",{"data-testid":"save-edit-book-btn",type:"submit",value:"Save changes",className:"btn btn-info save-edit-book"}),Object(x.jsx)("button",{"data-testid":"cancel-edit-book-btn",className:"btn btn-info cancel-edit-book",type:"button",onClick:function(){return a(!1)},children:"Cancel Editing"})]})]}),d&&Object(x.jsx)("p",{className:"book-added-confirmation",children:"Book successfully updated"})]})},M=(a(262),function(){var t=Object(n.useContext)(T),e=Object(s.b)(),a=Object(n.useState)(!1),c=Object(b.a)(a,2),o=c[0],r=c[1],i=Object(n.useState)(!1),d=Object(b.a)(i,2),u=d[0],l=d[1],j=Object(n.useState)(""),O=Object(b.a)(j,2),h=O[0],m=O[1],f=D.c().shape({title:D.d().required("Book Title should be filled in"),author:D.d().required("Book Author should be filled in"),price:D.b().required().positive("Book Price should be positive number"),coverImage:D.a().test("fileType","Image should be uploaded",(function(t){return t&&0!==t.length}))}),v=Object(w.d)({resolver:Object(C.a)(f)}),k=v.register,g=v.handleSubmit,E=v.formState.errors,y=v.reset,_=v.getValues,I=(0,v.watch)("coverImage");Object(n.useEffect)((function(){if(I&&I[0]){var t=new FileReader;t.readAsDataURL(I[0]),t.onload=function(){var e=t.result;m(e)}}}),[I]);return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{className:"add-book-form",onSubmit:g((function(a){var c={title:a.title,author:a.author,price:a.price,coverImage:h};e(p(t,c)).then((function(){return r(!0)})),setTimeout((function(){r(!1),y({}),l(!1)}),3e3)})),children:[Object(x.jsx)("label",{htmlFor:"inputTitle",className:"title-label",children:"Book Title"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"add-book-input-title",id:"inputTitle",type:"text",placeholder:"title"},k("title"))),E.title&&Object(x.jsx)("p",{children:E.title.message}),Object(x.jsx)("label",{htmlFor:"inputAuthor",children:"Book Author"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"add-book-input-author",id:"inputAuthor",type:"text",placeholder:"author"},k("author"))),E.author&&Object(x.jsx)("p",{children:E.author.message}),Object(x.jsx)("label",{htmlFor:"inputPrice",children:"Book Price"}),Object(x.jsx)("input",Object(R.a)({"data-testid":"add-book-input-price",id:"inputPrice",type:"number",placeholder:"price in $"},k("price"))),E.price&&""===_("price")&&Object(x.jsx)("p",{children:"Book Price should be filled in"}),E.price&&_("price")<0&&Object(x.jsx)("p",{children:E.price.message}),Object(x.jsx)("label",{htmlFor:"temp-id",children:"Book Cover Image"}),Object(x.jsxs)("label",{className:"upload-file-btn",children:["Browse",Object(x.jsx)("input",Object(R.a)({"data-testid":"add-book-input-image",type:"file",id:"file1",accept:".png, .jpg, .jpeg"},k("coverImage")))]}),I&&0!==I.length&&Object(x.jsx)("img",{"data-testid":"add-book-image",id:"image1",alt:"cover_image1",width:"120px",height:"200px",src:h}),E.coverImage&&!u&&Object(x.jsx)("p",{children:E.coverImage.message}),Object(x.jsx)("input",{"data-testid":"add-book-submit-btn",type:"submit",value:"Add new book",className:"btn btn-info"}),o&&Object(x.jsx)("p",{className:"book-added-confirmation",children:"Book successfully added"})]})})}),V=(a(263),function(t){var e=t.keyword,a=t.setKeyword;return Object(x.jsxs)("div",{className:"search-field",children:[Object(x.jsx)("span",{className:"search-title",children:"Find your book"}),Object(x.jsx)("input",{"data-testid":"search-field",className:"search",value:e,placeholder:"search book",onChange:function(t){return a(t.target.value)}},"random1")]})}),H=function(t){var e=t.book,a=t.style,c=t.switchDisplayEditForm,n=Object(s.b)(),o=e.id,r=e.title,i=e.author,d=e.price,u=e.coverImage,l="book-".concat(o),b="add-to-cart-btn-".concat(o),j="edit-book-btn-".concat(o);return Object(x.jsxs)("div",{className:"book-list-item",style:a,"data-testid":l,children:[Object(x.jsx)("div",{className:"book-cover",children:Object(x.jsx)("img",{src:u,alt:"cover"})}),Object(x.jsxs)("div",{className:"book-details",children:[Object(x.jsx)("span",{className:"book-title","data-testid":"book-title",children:r}),Object(x.jsx)("div",{className:"book-author","data-testid":"book-author",children:i}),Object(x.jsxs)("div",{className:"book-price","data-testid":"book-price",children:["$",d]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{type:"button",className:"btn btn-info add-to-cart",onClick:function(){return n(f(o))},"data-testid":b,children:"Add to cart"}),Object(x.jsx)("button",{type:"button",className:"btn btn-info edit-book",onClick:function(t){return c(t)},"data-id":o,"data-testid":j,children:"Edit Book"})]})]})]})},q=function(){var t=Object(n.useState)(""),e=Object(b.a)(t,2),a=e[0],c=e[1],o=Object(n.useState)(0),r=Object(b.a)(o,2),i=r[0],d=r[1],u=Object(n.useState)(!1),l=Object(b.a)(u,2),O=l[0],p=l[1],m=Object(n.useState)(null),f=Object(b.a)(m,2),g=f[0],E=f[1],y=Object(n.useCallback)((function(t){t.currentTarget.dataset.id&&(d(Number(t.currentTarget.dataset.id)),E(Number(t.currentTarget.dataset.id))),p(!0)}),[]),_=Object(n.useCallback)((function(){O&&g||p(!O),E(null)}),[O,g]),I=Object(n.useMemo)((function(){return O&&!g}),[O,g]),N=Object(n.useMemo)((function(){return O&&g}),[O,g]),B=Object(s.c)((function(t){return t.bookList})),S=Object(n.useContext)(T),R=Object(s.b)(),w=B.books,D=B.loading,C=B.error,A=Object(n.useMemo)((function(){return w.filter((function(t){return t.title.toLowerCase().includes(a.toLowerCase())}))}),[a,w]);Object(n.useEffect)((function(){R(h(S))}),[R,S]);var P=function(t){var e=t.index,a=t.key,c=t.style,n=A[e];return n?Object(x.jsx)(H,{book:n,style:c,switchDisplayEditForm:y},a):null};return D?Object(x.jsx)(v,{}):C?Object(x.jsx)(k,{}):Object(x.jsxs)("div",{children:[Object(x.jsx)(V,{keyword:a,setKeyword:c}),Object(x.jsx)("button",{"data-testid":"add-book-btn",type:"button",className:"btn btn-info show-add-new-book",onClick:_,children:"Add Book"}),I&&Object(x.jsx)(M,{}),N&&Object(x.jsx)(Q,{bookId:i,switchDisplayEditForm:function(){return p(!1)}}),Object(x.jsx)("div",{children:Object(x.jsx)(j.c,{children:function(t){var e=t.height,a=t.registerChild,c=t.scrollTop;return Object(x.jsx)("div",{ref:function(t){return a(t)},className:"book-list",children:Object(x.jsx)(j.a,{disableHeight:!0,children:function(t){var a=t.width;return Object(x.jsx)(j.b,{width:a,height:e,rowCount:A.length,rowHeight:220,autoHeight:!0,scrollTop:c,rowRenderer:P})}})})}})})]})},$=function(){return Object(x.jsx)("div",{children:Object(x.jsx)(q,{})})},J=(a(264),a(265),function(t){var e=t.item,a=t.idx,c=Object(s.b)(),o=e.id,r=e.amount,i=Object(s.c)(L),d=Object(n.useMemo)((function(){return i(e.id)}),[e.id]),u="item-image-".concat(o),l="item-title-".concat(o),b="item-amount-".concat(o),j="item-price-".concat(o),O="item-all-remove-btn-".concat(o),h="item-remove-btn-".concat(o),p="item-add-btn-".concat(o);if(!d)return Object(x.jsx)(x.Fragment,{});var m=d.title,v=d.price,k=d.coverImage;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:a+1}),Object(x.jsx)("td",{"data-testid":u,children:Object(x.jsx)("div",{className:"book-coverage",children:Object(x.jsx)("img",{src:k,alt:"cover"})})}),Object(x.jsx)("td",{"data-testid":l,children:m}),Object(x.jsx)("td",{"data-testid":b,children:r}),Object(x.jsxs)("td",{"data-testid":j,children:["$",v*r]}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{"data-testid":O,type:"button",onClick:function(){return c(function(t){return{type:"ALL_BOOKS_REMOVED_TO_CART",payload:{bookId:t,amount:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}}(o))},className:"btn btn-outline-danger btn-sm float-right",children:Object(x.jsx)("i",{className:"fa fa-trash-o"})}),Object(x.jsx)("button",{"data-testid":p,type:"button",onClick:function(){return c(f(o))},className:"btn btn-outline-success btn-sm float-right",children:Object(x.jsx)("i",{className:"fa fa-plus-circle"})}),Object(x.jsx)("button",{"data-testid":h,type:"button",onClick:function(){return c(function(t){return{type:"BOOK_REMOVED_TO_CART",payload:{bookId:t,amount:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1}}}(o))},className:"btn btn-outline-warning btn-sm float-right",children:Object(x.jsx)("i",{className:"fa fa-minus-circle"})})]})]},o)}),W=function(){var t=Object(s.b)(),e=Object(n.useContext)(A);Object(n.useEffect)((function(){t(h(e))}),[t,e]);var a=Object(s.c)(K),c=Object(s.c)(U);return Object(x.jsxs)("div",{className:"shopping-cart-table",children:[Object(x.jsx)("h2",{children:"Your Order"}),Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"#"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-item-header",children:"Item"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-title-header",className:"title",children:"Title"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-count-header",children:"Count"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-price-header",children:"Price"}),Object(x.jsx)("th",{"data-testid":"shopping-cart-action-header",children:"Action"})]})}),Object(x.jsx)("tbody",{children:c.map((function(t,e){return Object(x.jsx)(J,{idx:e,item:t},t.id)}))})]}),Object(x.jsxs)("div",{"data-testid":"shopping-cart-total",className:"total",children:["Total: $",a]})]})},X=function(){return Object(x.jsx)("div",{children:Object(x.jsx)(W,{})})},Y=function(){return Object(x.jsx)("div",{children:"Welcome to Book Store Main Page"})},z=(a(266),function(t){var e=t.numItems,a=t.total;return Object(x.jsxs)("header",{className:"shop-header row",children:[Object(x.jsx)(d.b,{to:"/",children:Object(x.jsx)("div",{"data-testid":"link-to-main-page",className:"logo text-dark",children:"ReStore"})}),Object(x.jsxs)("div",{className:"shop-items",children:[Object(x.jsx)(d.b,{to:"/catalog",children:Object(x.jsx)("div",{"data-testid":"link-to-catalog",className:"store",children:"Books Catalog"})}),Object(x.jsx)(d.b,{to:"/items",children:Object(x.jsxs)("div",{className:"shopping-cart","data-testid":"link-to-shopping-cart",children:[Object(x.jsx)("i",{className:"cart-icon fa fa-shopping-cart"}),e," ","items ($",a,")"]})})]})]})}),Z=function(){var t=Object(s.c)(K),e=Object(s.c)(G);return Object(x.jsxs)("main",{role:"main",className:"container",children:[Object(x.jsx)(z,{numItems:e,total:t}),Object(x.jsxs)(l.c,{children:[Object(x.jsx)(l.a,{path:"/",component:Y,exact:!0}),Object(x.jsx)(l.a,{path:"/catalog",component:$,exact:!0}),Object(x.jsx)(l.a,{path:"/items",component:X})]})]})},tt=a(13),et=a(22),at=a(23),ct=function(t){Object(et.a)(a,t);var e=Object(at.a)(a);function a(t){var c;return Object(_.a)(this,a),(c=e.call(this,t)).state={hasErrorValue:{hasError:!1}},c}return Object(tt.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasErrorValue:{hasError:!1}})}},{key:"render",value:function(){var t=this.state.hasErrorValue,e=this.props.children;return t.hasError?Object(x.jsx)(k,{}):e.props.children}}]),a}(n.Component),nt=a(34),ot=a(80),rt=a(122),it=a.n(rt),st=a(123),dt={books:[],loading:!0,error:null,status:O.PENDING},ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_BOOKS_REQUEST_PENDING":return{books:[],loading:!0,error:null,status:e.payload};case"FETCH_BOOKS_REQUEST_SUCCESS":return{books:e.payload.newBooks,loading:!1,error:null,status:e.payload.status};case"FETCH_BOOKS_REQUEST_ERROR":return{books:[],loading:!1,error:e.payload.error,status:e.payload.status};case"BOOK_ADDED_TO_CATALOG":return Object(R.a)(Object(R.a)({},t),{},{books:t.books.concat(e.payload.newBook),status:e.payload.status});case"BOOK_UPDATED_IN_CATALOG":return Object(R.a)(Object(R.a)({},t),{},{books:t.books.slice(0,e.payload.updatedBook.id-1).concat(e.payload.updatedBook).concat(t.books.slice(e.payload.updatedBook.id,t.books.length)),status:e.payload.status});case"ADD_BOOKS_REQUEST_ERROR":case"UPDATE_BOOKS_REQUEST_ERROR":return Object(R.a)(Object(R.a)({},t),{},{loading:!1,error:e.payload.error,status:e.payload.status});case"ADD_BOOKS_REQUEST_PENDING":case"UPDATE_BOOKS_REQUEST_PENDING":return Object(R.a)(Object(R.a)({},t),{},{status:e.payload});default:return t}},lt=a(81),bt=a(82),jt=a(29),Ot={cartItems:{}},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"BOOK_ADDED_TO_CART":var a,c,n=null!==(a=null===(c=t.cartItems[e.payload.bookId])||void 0===c?void 0:c.amount)&&void 0!==a?a:0;return Object(R.a)(Object(R.a)({},t),{},{cartItems:Object(R.a)(Object(R.a)({},t.cartItems),{},Object(jt.a)({},e.payload.bookId,{id:e.payload.bookId,amount:n+e.payload.amount}))});case"BOOK_REMOVED_TO_CART":var o,r,i=null!==(o=null===(r=t.cartItems[e.payload.bookId])||void 0===r?void 0:r.amount)&&void 0!==o?o:0;if(1===i){var s=t.cartItems,d=e.payload.bookId,u=(s[d],Object(lt.a)(s,[d].map(bt.a)));return Object(R.a)(Object(R.a)({},t),{},{cartItems:Object(R.a)({},u)})}return Object(R.a)(Object(R.a)({},t),{},{cartItems:Object(R.a)(Object(R.a)({},t.cartItems),{},Object(jt.a)({},e.payload.bookId,{id:e.payload.bookId,amount:i+e.payload.amount}))});case"ALL_BOOKS_REMOVED_TO_CART":var l=t.cartItems,b=e.payload.bookId,j=(l[b],Object(lt.a)(l,[b].map(bt.a)));return Object(R.a)(Object(R.a)({},t),{},{cartItems:Object(R.a)({},j)});default:return t}},pt=Object(nt.b)({bookList:ut,shoppingCart:ht}),mt={key:"root",storage:it.a,whitelist:["shoppingCart"]},ft=Object(ot.a)(mt,pt),xt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||nt.c,vt=Object(nt.d)(ft,xt(Object(nt.a)(st.a))),kt=Object(ot.b)(vt),gt=new B;i.a.render(Object(x.jsx)(s.a,{store:vt,children:Object(x.jsx)(u.a,{loading:null,persistor:kt,children:Object(x.jsx)(ct,{children:Object(x.jsx)(A.Provider,{value:gt,children:Object(x.jsx)(d.a,{children:Object(x.jsx)(Z,{})})})})})}),document.getElementById("root"))},83:function(t,e,a){}},[[270,1,2]]]);
//# sourceMappingURL=main.6f25559e.chunk.js.map